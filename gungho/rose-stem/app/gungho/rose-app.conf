meta=gungho/config-meta/lfric-gungho/HEAD

[command]
aprun=aprun   -n 1 $BIN_DIR/gungho configuration.nml
default=$BIN_DIR/gungho configuration.nml
mpiexec=mpiexec -n 1 $BIN_DIR/gungho configuration.nml

[file:$DESTINATION_DIRECTORY]
mode=mkdir

[file:configuration.nml]
mode=auto
source=namelist:base_mesh
      = (namelist:damping_layer)
      =  namelist:extrusion
      =  namelist:finite_element
      =  namelist:formulation
      = (namelist:idealised)
      = (namelist:initial_density)
      = (namelist:initial_temperature)
      = (namelist:initial_wind)
      =  namelist:io
      =  namelist:time
      =  namelist:planet
      =  namelist:subgrid
      =  namelist:solver
      =  namelist:mixed_solver
      =  namelist:helmholtz_solver
      =  namelist:timestepping
      = (namelist:biperiodic_deppt)
      =  namelist:transport
      =  namelist:partitioning
      = (namelist:domain_size)
      =  namelist:mixing
      = (namelist:physics)
      =  namelist:orography
      = (namelist:orography_agnesi_cartesian)
      = (namelist:orography_agnesi_spherical)
      = (namelist:orography_bell_cartesian)
      = (namelist:orography_schar_cartesian)
      = (namelist:orography_schar_spherical)
      = (namelist:orography_dcmip200_spherical)
      = (namelist:multigrid)
      =  namelist:checks

[namelist:base_mesh]
f_lat_deg=45.0
fplane=.false.
prime_mesh_name='dynamics'

[namelist:biperiodic_deppt]
method='euler'
n_dep_pt_iterations=1

[namelist:checks]
limit_cfl=.false.
max_cfl=0.75

[namelist:damping_layer]
dl_base=800.0
dl_str=0.5

[namelist:domain_size]
planar_domain_max_x=1.0
planar_domain_max_y=1.0
planar_domain_min_x=-1.0
planar_domain_min_y=-1.0

[namelist:extrusion]
domain_top=10000.0
method='uniform'
number_of_layers=5

[namelist:finite_element]
cellshape='quadrilateral'
coordinate_order=0
element_order=0
rehabilitate=.true.
supg=.false.
vorticity_in_w1=.true.

[namelist:formulation]
dlayer_on=.false.
dry_static_adjust=.false.
hard_wired_detj=.false.
hard_wired_j=.false.
init_exner_bt=.true.
rotating=.true.
set_hydrostatic_init=.false.
shallow=.true.
transport_only=.false.
use_moisture=.false.
use_physics=.false.
use_wavedynamics=.true.
exner_from_eos       = .true.

[namelist:helmholtz_solver]
gcrk=18
method='bicgstab'
normalise=.T
preconditioner='tridiagonal'
si_pressure_maximum_iterations=400
si_pressure_tolerance=1.0e-6

[namelist:idealised]
test='gravity_wave'

[namelist:initial_density]
tracer_background=0.1
tracer_max=2.0
x1=0.0
x2=0.0
y1=0.0
y2=0.0

[namelist:initial_temperature]
bvf_square=0.0001
theta_surf=300.0

[namelist:initial_wind]
profile='none'
sbr_angle_lat=0.0
sbr_angle_lon=0.0
smp_init_wind=.false.
u0=0.0
v0=0.0

[namelist:io]
checkpoint_frequency=9999
checkpoint_read=$RESTART_READ
checkpoint_write=$RESTART_WRITE
diag_stem_name='diagDynamo'
diagnostic_frequency=3
nodal_output_on_w3=.true.
restart_stem_name='$CYLC_SUITE_SHARE_DIR/data/restartDynamo_$ROSE_SUITE_NAME-$ROSE_TASK_NAME'
subroutine_counters=.false.
subroutine_timers=.true.
use_xios_io=.false.
write_diag=.true.
write_minmax_tseries=.false.

[namelist:mixed_solver]
gcrk=18
guess_np1=.F
normalise=.T
reference_reset_freq=4
si_maximum_iterations=10
si_method='gcr'
si_preconditioner='pressure'
si_tolerance=1.0e-6

[namelist:mixing]
mix_factor=0.0
smagorinsky=.false.
viscosity=.false.
viscosity_mu=0.0

[namelist:multigrid]
l_multigrid=.false.

[namelist:orography]
profile='none'

[namelist:orography_agnesi_cartesian]
direction='x'
half_width_x=10.0
half_width_y=10.0
mountain_height=100.0
x_centre=0.0
y_centre=0.0

[namelist:orography_agnesi_spherical]
half_width=2500.0
lambda_centre_dec=1.5
lambda_focus_dec=1.5
mountain_height=100.0
phi_centre_dec=0.0
phi_focus_dec=0.3333

[namelist:orography_bell_cartesian]
direction='xy'
half_width_x=1000.0
half_width_y=1000.0
mountain_height=400.0
x_centre=0.0
y_centre=0.0

[namelist:orography_dcmip200_spherical]
lambda_centre_dec=1.5
mountain_height=2000.0
osc_half_width_dec=0.0625
phi_centre_dec=0.0
radius_dec=0.75

[namelist:orography_schar_cartesian]
direction='x'
half_width_x=20.0
half_width_y=20.0
mountain_height=250.0
wavelength=20.0
x_centre=0.0
y_centre=0.0

[namelist:orography_schar_spherical]
half_width=5000.0
lambda_centre_dec=0.25
mountain_height=250.0
phi_centre_dec=0.0
wavelength=4000.0

[namelist:partitioning]
auto=.true.

[namelist:physics]
boundary_layer_placement=0
cloud_scheme='none'
convection_placement=0
heldsuarez_thermo_placement=0
heldsuarez_wind_placement=0
hs_random=.false.
microphysics_placement=0
rhcritical=0.99
radiation_placement = 'none'

[namelist:planet]
cp=1005.0
gravity=9.80665
omega=7.292116E-5
p_zero=100000.0
radius=6371229.0
rd=287.05
scaling_factor=125.0

[namelist:solver]
gcrk=18
maximum_iterations=399
method='cg'
preconditioner='diagonal'
tolerance=1.0e-6

[namelist:subgrid]
dep_pt_stencil_extent=3
rho_approximation='ppm_no_limiter'
rho_approximation_stencil_extent=2

[namelist:time]
timestep_end=$RESTART_STOP
timestep_start=$RESTART_START

[namelist:timestepping]
alpha=0.5
dt=$DT
inner_iterations=1
method='semi_implicit'
outer_iterations=4
runge_kutta_method='ssp3'
spinup_alpha=.false.
spinup_period=1
spinup_winds=.false.
tau_r=0.5
tau_t=0.5
tau_u=0.5

[namelist:transport]
consistent_metric=.false.
enforce_monotonicity=.false.
fv_advective_order=3
fv_flux_order=2
operators='fv'
scheme='method_of_lines'
